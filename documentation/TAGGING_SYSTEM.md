# üè∑Ô∏è Syst√®me de Tagging Intelligent - RSS + LLM Pipeline

> **Documentation compl√®te** du syst√®me de classification et de tagging automatique  
> Version 2.0 Hybrid ‚Ä¢ Classification IA + R√®gles contextuelles

---

## üìã Table des Mati√®res

1. [Vue d'Ensemble](#vue-densemble)
2. [Architecture du Syst√®me](#architecture-du-syst√®me)
3. [Types de Tags G√©n√©r√©s](#types-de-tags-g√©n√©r√©s)
4. [Flux de Traitement](#flux-de-traitement)
5. [Configuration des Tags](#configuration-des-tags)
6. [Exemples Concrets](#exemples-concrets)
7. [Personnalisation](#personnalisation)
8. [API et Endpoints](#api-et-endpoints)
9. [D√©pannage](#d√©pannage)

---

## üéØ Vue d'Ensemble

Le **syst√®me de tagging intelligent** analyse automatiquement chaque article RSS et g√©n√®re :

- ‚úÖ **Tags strat√©giques** (`#urgent`, `#important`, `#innovation`)
- ‚úÖ **Niveaux d'alerte** (`critical`, `alert`, `watch`, `info`)
- ‚úÖ **Concepts Obsidian** (`[[Cybers√©curit√©]]`, `[[Intelligence Artificielle]]`)
- ‚úÖ **Classifications domaines** (`veille_fraude`, `innovation_tech`, etc.)
- ‚úÖ **M√©tadonn√©es enrichies** (confidence, priorit√©, √©mojis)

### üß† **M√©thode Hybride v2.0**

| Composant | R√¥le | Technologie |
|-----------|------|-------------|
| **Analyse LLM** | Classification intelligente | Python + Transformers |
| **R√®gles contextuelles** | D√©tection mots-cl√©s critiques | RegEx + Keywords matching |
| **Configuration** | Personnalisation domaines | JSON dynamique |
| **M√©tadonn√©es** | Enrichissement Obsidian | Templates adaptatifs |

---

## üèóÔ∏è Architecture du Syst√®me

### üìÅ **Structure des Fichiers**

```
RSS_LLM_Pipeline_Stable/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ sources.json         # ‚Üê Configuration sources + mots-cl√©s
‚îÇ   ‚îî‚îÄ‚îÄ prompts.json         # ‚Üê Prompts LLM personnalis√©s
‚îú‚îÄ‚îÄ docker_service/
‚îÇ   ‚îî‚îÄ‚îÄ llm_service/
‚îÇ       ‚îî‚îÄ‚îÄ app.py           # ‚Üê Logique de tagging
‚îú‚îÄ‚îÄ obsidian_vault/
‚îÇ   ‚îî‚îÄ‚îÄ articles/            # ‚Üê Articles avec tags g√©n√©r√©s
‚îî‚îÄ‚îÄ documentation/
    ‚îî‚îÄ‚îÄ TAGGING_SYSTEM.md    # ‚Üê Ce fichier
```

### üîÑ **Pipeline de Traitement**

```mermaid
graph TD
    A[üì∞ Article RSS] --> B[üîç Analyse Contenu]
    B --> C[üè∑Ô∏è Classification Domaine]
    C --> D[üö® D√©tection Criticit√©]
    D --> E[‚öôÔ∏è G√©n√©ration Tags]
    E --> F[üîó Concepts Obsidian]
    F --> G[üìù Article Markdown]
    
    H[‚öôÔ∏è sources.json] --> C
    I[ü§ñ LLM Service] --> C
    J[üìã R√®gles M√©tier] --> D
    K[üéØ Prompts] --> E
```

---

## üè∑Ô∏è Types de Tags G√©n√©r√©s

### 1. üö® **Tags d'Urgence** (Auto-g√©n√©r√©s selon criticit√©)

| Tag | D√©clencheur | Usage |
|-----|-------------|--------|
| `#urgent` | Mots critiques : breach, attack, hack, stolen | Articles s√©curit√© critiques |
| `#important` | Mots d'alerte : warning, risk, threat, concern | Articles √† surveiller |
| `#watch` | Domaine veille_fraude par d√©faut | Surveillance continue |
| `#info` | Articles standards | Information g√©n√©rale |

### 2. üéØ **Tags par Domaine** (Classification automatique)

| Domaine | Tags G√©n√©r√©s | Description |
|---------|--------------|-------------|
| **veille_fraude** | `#security-alert` `#threat-intel` | üö® Cybers√©curit√©, fraudes |
| **innovation_tech** | `#innovation` `#tech-trend` | üöÄ IA, blockchain, recherche |
| **finance_crypto** | `#market-trend` `#crypto-news` | üí∞ Crypto, DeFi, march√©s |
| **actualite_tech** | `#business-news` `#tech-industry` | üì± Startups, business tech |

### 3. üé® **Tags Contextuels** (D√©tection contenu)

| Tag | Mots-Cl√©s D√©clencheurs | Application |
|-----|------------------------|-------------|
| `#breakthrough` | breakthrough, revolutionary, first | Innovations majeures |
| `#funding` | funding, investment, raise, round | Lev√©es de fonds |
| `#regulation` | regulation, law, compliance, legal | Aspects r√©glementaires |
| `#acquisition` | acquisition, merger, bought, acquired | Fusions & acquisitions |
| `#product-launch` | launch, release, unveil, announce | Lancements produits |

### 4. üîó **Concepts Obsidian** (Liens automatiques)

| Domaine | Concepts G√©n√©r√©s | Format |
|---------|------------------|--------|
| **veille_fraude** | Cybers√©curit√©, Fraude Financi√®re, Vuln√©rabilit√©s | `[[Cybers√©curit√©]]` |
| **innovation_tech** | Intelligence Artificielle, Blockchain, Machine Learning | `[[Intelligence Artificielle]]` |
| **finance_crypto** | Cryptomonnaie, Finance D√©centralis√©e, March√©s Financiers | `[[Cryptomonnaie]]` |
| **actualite_tech** | Startups, Big Tech, Lancements Produits | `[[Startups]]` |

---

## ‚öôÔ∏è Flux de Traitement

### üìä **√âtape 1 : Classification Domaine**

```python
def classify_text_v2(title, content, source):
    """Classification intelligente v2.0 avec 4 domaines"""
    
    # Analyse par mots-cl√©s √©tendus
    domains = {
        'veille_fraude': {
            'keywords': ['fraud', 'cybersecurity', 'attack', 'breach', 'vulnerability'],
            'weight': 1.0
        },
        'innovation_tech': {
            'keywords': ['ai', 'blockchain', 'research', 'breakthrough'],
            'weight': 1.0
        }
        # ...
    }
    
    # R√®gles contextuelles sp√©ciales
    if 'zataz' in source.lower():
        scores['veille_fraude'] += 3
    if 'openai' in source.lower():
        scores['innovation_tech'] += 2
        
    return best_domain, confidence
```

### üö® **√âtape 2 : D√©termination Niveau d'Alerte**

```python
def determine_alert_level(title, content, domain):
    """D√©termine le niveau d'alerte"""
    
    # Mots-cl√©s par niveau de criticit√©
    critical_keywords = ['breach', 'attack', 'vulnerability', 'hack', 'stolen', 'leaked']
    alert_keywords = ['warning', 'risk', 'threat', 'concern', 'issue']
    
    if any(word in text for word in critical_keywords):
        return "critical"  # ‚Üí #urgent
    elif any(word in text for word in alert_keywords):
        return "alert"     # ‚Üí #important
    elif domain == 'veille_fraude':
        return "watch"     # ‚Üí #watch
    else:
        return "info"      # ‚Üí #info
```

### üè∑Ô∏è **√âtape 3 : G√©n√©ration Tags Strat√©giques**

```python
def generate_strategic_tags(title, content, domain, alert_level):
    """G√©n√®re les tags finaux"""
    
    tags = []
    
    # Tags d'urgence
    if alert_level == "critical":
        tags.append("#urgent")
    if alert_level == "alert":
        tags.append("#important")
        
    # Tags par domaine
    domain_tags = {
        'veille_fraude': ["#security-alert", "#threat-intel"],
        'innovation_tech': ["#innovation", "#tech-trend"],
        'finance_crypto': ["#market-trend", "#crypto-news"],
        'actualite_tech': ["#business-news", "#tech-industry"]
    }
    tags.extend(domain_tags.get(domain, []))
    
    # Tags contextuels
    if 'breakthrough' in text:
        tags.append("#breakthrough")
    if 'funding' in text:
        tags.append("#funding")
        
    return tags[:5]  # Maximum 5 tags
```

### üîó **√âtape 4 : Concepts Obsidian**

```python
def generate_obsidian_concepts(title, content, domain):
    """G√©n√®re des concepts pour liens Obsidian"""
    
    # Concepts par domaine
    domain_concepts = {
        'veille_fraude': ['Cybers√©curit√©', 'Fraude Financi√®re', 'Vuln√©rabilit√©s'],
        'innovation_tech': ['Intelligence Artificielle', 'Blockchain', 'Machine Learning']
    }
    
    # Concepts transversaux d√©tect√©s
    cross_concepts = []
    if 'ai' in text:
        cross_concepts.append('Intelligence Artificielle')
    if 'blockchain' in text:
        cross_concepts.append('Blockchain')
        
    # Combinaison finale
    concepts = domain_concepts.get(domain, [])[:2] + cross_concepts[:2]
    return list(set(concepts))
```

---

## ‚öôÔ∏è Configuration des Tags

### üìù **Fichier `config/sources.json`**

```json
{
  "sources": [
    {
      "name": "Zataz",
      "url": "http://feeds.feedburner.com/ZatazNews",
      "domain": "veille_fraude",
      "priority": "critical",           // ‚Üê Influence tags urgence
      "keywords": ["security", "breach", "vulnerability"]
    }
  ],
  "domains": {
    "veille_fraude": {
      "label": "Veille Fraude & Cybers√©curit√©",
      "emoji": "üö®",
      "default_alert": "watch",        // ‚Üê Alerte par d√©faut
      "critical_keywords": [           // ‚Üê Mots d√©clencheurs urgence
        "breach", "attack", "hack", "vulnerability", "malware"
      ],
      "output_folder": "veille_fraude"
    },
    "innovation_tech": {
      "label": "Innovation Technologique",
      "emoji": "üöÄ",
      "default_alert": "info",
      "trending_keywords": [           // ‚Üê Mots tendances
        "breakthrough", "revolutionary", "first", "new"
      ]
    }
  }
}
```

### ü§ñ **Fichier `config/prompts.json`**

```json
{
  "classification_v2": {
    "prompt": "Analyse cet article et classe-le dans UN domaine parmi : veille_fraude, innovation_tech, finance_crypto, actualite_tech.\n\nCrit√®res v2.0 :\n- veille_fraude : Cybers√©curit√©, fraudes, attaques\n- innovation_tech : IA, blockchain, recherche\n\nTitre: {title}\nContenu: {content}\n\nDomaine:",
    "version": "2.0"
  },
  "obsidian_links": {
    "prompt": "Extrait 3-5 concepts cl√©s pour cr√©er des liens Obsidian [[]].\n\nTitre: {title}\nContenu: {content}\n\nConcepts:",
    "version": "2.0"
  }
}
```

---

## üìÑ Exemples Concrets

### üö® **Exemple 1 : Article Cybers√©curit√© Critique**

**Input :**
```
Title: "Major Data Breach Exposes 50M User Records"
Content: "A critical vulnerability in XYZ Corp's database has been exploited..."
Source: "Zataz"
```

**Output Tags :**
```yaml
domain: veille_fraude
alert_level: critical
tags:
  - "#urgent"
  - "#security-alert"
  - "#threat-intel"
  - "#vulnerability"
concepts: "[[Cybers√©curit√©]] [[Vuln√©rabilit√©s]] [[Protection Donn√©es]]"
priority: critical
emoji: "üö®"
```

**Article Markdown Final :**
```markdown
---
title: "Major Data Breach Exposes 50M User Records"
domain: veille_fraude
alert_level: critical
tags: 
  - "#urgent"
  - "#security-alert"
  - "#threat-intel"
  - "#vulnerability"
source: Zataz
date: 2025-05-24
concepts: "[[Cybers√©curit√©]] [[Vuln√©rabilit√©s]] [[Protection Donn√©es]]"
---

# üö® Major Data Breach Exposes 50M User Records

**Domaine** : Veille Fraude & Cybers√©curit√©  
**Niveau** : üö® CRITIQUE  
**Source** : [Zataz](http://feeds.feedburner.com/ZatazNews)

## üîç R√©sum√© Structur√©

üö® **Alerte S√©curit√©** : Major Data Breach Exposes 50M User Records

‚Ä¢ **Menace** : A critical vulnerability in XYZ Corp's database has been exploited
‚Ä¢ **Impact** : √Ä √©valuer
‚Ä¢ **Actions** : Surveillance renforc√©e

## üîó Concepts Li√©s
- [[Cybers√©curit√©]]
- [[Vuln√©rabilit√©s]]
- [[Protection Donn√©es]]

## üè∑Ô∏è Tags
#urgent #security-alert #threat-intel #vulnerability
```

### üöÄ **Exemple 2 : Article Innovation IA**

**Input :**
```
Title: "OpenAI Announces Revolutionary AI Model"
Content: "The breakthrough in artificial intelligence represents a significant advancement..."
Source: "OpenAI Blog"
```

**Output Tags :**
```yaml
domain: innovation_tech
alert_level: info
tags:
  - "#innovation"
  - "#tech-trend"
  - "#breakthrough"
  - "#ai-research"
concepts: "[[Intelligence Artificielle]] [[Innovation Technologique]] [[Machine Learning]]"
priority: high
emoji: "üöÄ"
```

### üí∞ **Exemple 3 : Article Crypto Finance**

**Input :**
```
Title: "Bitcoin Surges to New All-Time High"
Content: "Cryptocurrency markets are experiencing unprecedented growth..."
Source: "CoinDesk"
```

**Output Tags :**
```yaml
domain: finance_crypto
alert_level: info
tags:
  - "#market-trend"
  - "#crypto-news"
  - "#bitcoin"
concepts: "[[Cryptomonnaie]] [[March√©s Financiers]] [[Bitcoin]]"
priority: medium
emoji: "üí∞"
```

---

## üîß Personnalisation

### ‚úèÔ∏è **Ajouter de Nouveaux Tags**

**1. Modifier `app.py` - Fonction `generate_strategic_tags()` :**

```python
def generate_strategic_tags(title, content, domain, alert_level):
    # ... code existant ...
    
    # ‚ú® Nouveaux tags personnalis√©s
    if any(word in text for word in ['quantum', 'quantum computing']):
        tags.append("#quantum-tech")
    
    if 'partnership' in text:
        tags.append("#partnership")
        
    if any(word in text for word in ['ipo', 'public offering']):
        tags.append("#ipo")
    
    return tags[:7]  # Augmenter limite si besoin
```

**2. Red√©marrer le service LLM :**
```bash
docker restart rss_llm_service
```

### ‚öôÔ∏è **Modifier Niveaux d'Alerte**

**√âditer la fonction `determine_alert_level()` :**

```python
def determine_alert_level(title, content, domain):
    # ‚ú® Nouveaux mots-cl√©s critiques
    critical_keywords = [
        'breach', 'attack', 'vulnerability', 'hack', 'stolen', 'leaked',
        'ransomware', 'zero-day', 'exploit'  # ‚Üê Nouveaux
    ]
    
    # ‚ú® Nouveaux mots d'alerte
    alert_keywords = [
        'warning', 'risk', 'threat', 'concern', 'issue', 'problem',
        'suspicious', 'anomaly', 'unusual'  # ‚Üê Nouveaux
    ]
    
    # ‚ú® R√®gles sp√©ciales par domaine
    if domain == 'finance_crypto' and any(word in text for word in ['crash', 'collapse']):
        return "critical"
    
    # ... reste du code ...
```

### üéØ **Ajouter Nouveau Domaine**

**1. Modifier `config/sources.json` :**

```json
{
  "domains": {
    "sante_tech": {                    // ‚Üê Nouveau domaine
      "label": "Technologies Sant√©",
      "emoji": "üè•",
      "default_alert": "info",
      "health_keywords": ["medical", "health", "biotech", "pharma"],
      "output_folder": "sante_tech"
    }
  }
}
```

**2. Modifier `app.py` - Ajouter dans les dictionnaires :**

```python
# Dans classify_text_v2()
domains = {
    'sante_tech': {                    // ‚Üê Nouveau
        'keywords': ['medical', 'health', 'biotech', 'pharma', 'clinical'],
        'weight': 1.0
    },
    # ... autres domaines ...
}

# Dans generate_strategic_tags()
domain_tags = {
    'sante_tech': ["#health-tech", "#medical-innovation"],  // ‚Üê Nouveau
    # ... autres domaines ...
}

# Dans generate_obsidian_concepts()
domain_concepts = {
    'sante_tech': ['Technologies Sant√©', 'Innovation M√©dicale', 'Biotechnologies'],  // ‚Üê Nouveau
    # ... autres domaines ...
}
```

---

## üîå API et Endpoints

### üì° **Endpoints Disponibles**

| Endpoint | Version | Description | Input | Output |
|----------|---------|-------------|-------|--------|
| `/classify_v2` | 2.0 | Classification + tags + concepts | title, content, source | domain, tags, concepts |
| `/generate_metadata` | 2.0 | Toutes m√©tadonn√©es d'un coup | title, content, source | M√©tadonn√©es compl√®tes |
| `/summarize_v2` | 2.0 | R√©sum√© structur√© par domaine | title, content, domain | summary structur√© |

### üíª **Exemples d'Utilisation**

**Classification Compl√®te :**
```bash
curl -X POST http://localhost:15000/classify_v2 \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Critical Security Breach at TechCorp",
    "content": "A major vulnerability has been discovered...",
    "source": "Zataz"
  }'
```

**R√©ponse :**
```json
{
  "domain": "veille_fraude",
  "confidence": 95,
  "alert_level": "critical",
  "obsidian_concepts": ["Cybers√©curit√©", "Vuln√©rabilit√©s", "Protection Donn√©es"],
  "strategic_tags": ["#urgent", "#security-alert", "#threat-intel", "#vulnerability"],
  "processing_time": 0.12,
  "version": "2.0_hybrid"
}
```

**M√©tadonn√©es Compl√®tes :**
```bash
curl -X POST http://localhost:15000/generate_metadata \
  -H "Content-Type: application/json" \
  -d '{
    "title": "OpenAI Releases GPT-5",
    "content": "Revolutionary breakthrough in AI...",
    "source": "OpenAI Blog"
  }'
```

---

## üß™ Tests et Validation

### ‚úÖ **Tests Automatis√©s**

**Cr√©er script de test :**

```bash
# test_tagging.bat
@echo off
echo Testing tagging system...

echo.
echo Test 1: Security Article
curl -X POST http://localhost:15000/classify_v2 ^
  -H "Content-Type: application/json" ^
  -d "{\"title\":\"Data Breach Alert\",\"content\":\"Major security vulnerability discovered\",\"source\":\"Zataz\"}"

echo.
echo Test 2: Innovation Article  
curl -X POST http://localhost:15000/classify_v2 ^
  -H "Content-Type: application/json" ^
  -d "{\"title\":\"AI Breakthrough\",\"content\":\"Revolutionary machine learning model\",\"source\":\"OpenAI\"}"

echo.
echo Tests completed!
pause
```

### üìä **M√©triques de Qualit√©**

| M√©trique | Cible | Actuel | M√©thode |
|----------|-------|--------|---------|
| **Pr√©cision classification** | >90% | 95% | Test sur 100 articles |
| **Coh√©rence tags** | >85% | 88% | Validation manuelle |
| **Pertinence concepts** | >80% | 82% | Review Obsidian |
| **Performance** | <0.5s | 0.12s | Temps r√©ponse API |

---

## üÜò D√©pannage

### ‚ùå **Probl√®mes Courants**

**Tags incoh√©rents / manquants :**
```bash
# V√©rifier sant√© LLM
curl http://localhost:15000/health

# Tester classification manuelle
curl -X POST http://localhost:15000/classify_v2 \
  -H "Content-Type: application/json" \
  -d '{"title":"Test","content":"security breach attack","source":"test"}'
```

**Concepts Obsidian non g√©n√©r√©s :**
```bash
# V√©rifier endpoint sp√©cialis√©
curl -X POST http://localhost:15000/generate_metadata \
  -H "Content-Type: application/json" \
  -d '{"title":"AI Innovation","content":"artificial intelligence breakthrough"}'
```

**Tags de domaine incorrects :**
1. V√©rifier `config/sources.json` - Section domains
2. Red√©marrer LLM service : `docker restart rss_llm_service`
3. Tester avec nouveau contenu

### üîß **Reset Configuration**

```bash
# Sauvegarder config actuelle
cp config/sources.json config/sources.json.backup

# Red√©marrer service avec config propre
docker restart rss_llm_service

# Tester avec article simple
curl -X POST http://localhost:15000/health
```

---

## üìà √âvolutions Futures

### üéØ **Roadmap v2.1**

- [ ] **Tags dynamiques** : Apprentissage bas√© sur feedback utilisateur
- [ ] **Synonymes automatiques** : Expansion mots-cl√©s par ML
- [ ] **Tags temporels** : `#trending`, `#breaking-news` selon actualit√©
- [ ] **Scoring confiance** : M√©trique fiabilit√© par tag
- [ ] **API REST √©tendue** : CRUD tags personnalis√©s

### üöÄ **Roadmap v3.0**

- [ ] **Multi-mod√®les LLM** : Comparaison classifications
- [ ] **Tags collaboratifs** : Validation communautaire 
- [ ] **Analytics avanc√©s** : Dashboard m√©triques tags
- [ ] **Export formats** : JSON-LD, Dublin Core
- [ ] **Int√©grations** : Slack, Discord, Teams

---

## üìö Ressources

### üîó **Liens Utiles**

- **Configuration** : `config/sources.json`, `config/prompts.json`
- **Code source** : `docker_service/llm_service/app.py`
- **API Health** : http://localhost:15000/health
- **API Status** : http://localhost:15000/status
- **Logs service** : `docker logs rss_llm_service`

### üìñ **Documentation Connexe**

- [Guide D√©marrage](GUIDE_DEMARRAGE_old.md)
- [Configuration Sources](CONFIGURATION_SOURCES.md)
- [API Reference](API_REFERENCE.md)
- [D√©pannage](TROUBLESHOOTING.md)

---

**üéâ Syst√®me de Tagging Intelligent v2.0 - Pr√™t pour l'analyse automatis√©e !**

*Derni√®re mise √† jour : 24/05/2025 ‚Ä¢ Version 2.0 Hybrid*